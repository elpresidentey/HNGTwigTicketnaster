{% extends "base.twig" %}

{% block title %}Dashboard - Ticket Management App{% endblock %}

{% block head %}
    {# Modern Dashboard styles #}
    <link rel="stylesheet" href="/assets/css/dashboard-modern.css">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <header class="dashboard-header" role="banner">
        <div class="header-content">
            <div class="user-info">
                <h1 class="dashboard-title">Dashboard</h1>
                <p class="welcome-text">Welcome back! Here's your ticket overview.</p>
            </div>
            <div class="header-actions">
                <button id="refreshStatsBtn" class="btn btn-outline refresh-btn js-only" 
                        title="Refresh Statistics" 
                        aria-label="Refresh ticket statistics">
                    <svg class="refresh-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <polyline points="23,4 23,10 17,10"></polyline>
                        <polyline points="1,20 1,14 7,14"></polyline>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                    </svg>
                    Refresh
                </button>
                <noscript>
                    <a href="/dashboard" class="btn btn-outline refresh-btn" title="Refresh Page" aria-label="Refresh page">
                        <svg class="refresh-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <polyline points="23,4 23,10 17,10"></polyline>
                            <polyline points="1,20 1,14 7,14"></polyline>
                            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                        </svg>
                        Refresh
                    </a>
                </noscript>
                <button id="logoutBtn" class="btn btn-secondary logout-btn" aria-label="Logout from dashboard">
                    <svg class="logout-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16,17 21,12 16,7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    Logout
                </button>
            </div>
        </div>
    </header>
    
    <main class="dashboard-content" role="main">
        <section class="stats-section" aria-labelledby="stats-title">
            <div class="stats-header">
                <h2 class="stats-title" id="stats-title">Ticket Overview</h2>
                <p class="stats-subtitle">Current status of all your tickets</p>
                <div class="last-updated" id="lastUpdated" aria-live="polite" aria-atomic="true">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    <span>Updated just now</span>
                </div>
            </div>
            
            <div class="stats-grid" role="list">
                <a href="/tickets" class="stat-card stat-card-open clickable-stat" 
                   role="listitem" 
                   aria-label="View open tickets"
                   onclick="window.location.href='/tickets'; return false;">
                    <div class="stat-header">
                        <div class="stat-icon stat-icon-open" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                        </div>
                        <h3 class="stat-title">Open Tickets</h3>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" id="openCount" aria-live="polite">0</span>
                        <span class="stat-label">Active</span>
                    </div>
                    <div class="stat-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </a>
                
                <a href="/tickets" class="stat-card stat-card-progress clickable-stat" 
                   role="listitem" 
                   aria-label="View tickets in progress"
                   onclick="window.location.href='/tickets'; return false;">
                    <div class="stat-header">
                        <div class="stat-icon stat-icon-progress" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2v20m8-10H4"></path>
                            </svg>
                        </div>
                        <h3 class="stat-title">In Progress</h3>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" id="progressCount" aria-live="polite">0</span>
                        <span class="stat-label">Working</span>
                    </div>
                    <div class="stat-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </a>
                
                <a href="/tickets" class="stat-card stat-card-closed clickable-stat" 
                   role="listitem" 
                   aria-label="View closed tickets"
                   onclick="window.location.href='/tickets'; return false;">
                    <div class="stat-header">
                        <div class="stat-icon stat-icon-closed" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"></path>
                            </svg>
                        </div>
                        <h3 class="stat-title">Closed Tickets</h3>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" id="closedCount" aria-live="polite">0</span>
                        <span class="stat-label">Completed</span>
                    </div>
                    <div class="stat-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </a>
            </div>
        </section>
        
        <section class="quick-actions" aria-labelledby="actions-title">
            <div class="actions-header">
                <h2 class="actions-title" id="actions-title">Quick Actions</h2>
                <p class="actions-subtitle">Manage your tickets efficiently</p>
            </div>
            <div class="actions-grid" role="list">
                <a href="/tickets" class="action-card action-primary" 
                   role="listitem" 
                   aria-label="Go to ticket management page">
                    <div class="action-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10,9 9,9 8,9"></polyline>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3 class="action-title">Manage Tickets</h3>
                        <p class="action-description">View, create, edit, and delete your tickets</p>
                    </div>
                    <div class="action-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </a>
                
                <button class="action-card action-secondary js-only" 
                        id="createTicketBtn" 
                        role="listitem" 
                        aria-label="Create a new ticket">
                    <div class="action-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="16"></line>
                            <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3 class="action-title">Create New Ticket</h3>
                        <p class="action-description">Quickly add a new ticket to track</p>
                    </div>
                    <div class="action-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </button>
                <noscript>
                    <a href="/tickets" class="action-card action-secondary" 
                       role="listitem" 
                       aria-label="Go to ticket management to create new tickets">
                        <div class="action-icon" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="16"></line>
                                <line x1="8" y1="12" x2="16" y2="12"></line>
                            </svg>
                        </div>
                        <div class="action-content">
                            <h3 class="action-title">Create New Ticket</h3>
                            <p class="action-description">Go to ticket management to create new tickets</p>
                        </div>
                        <div class="action-arrow" aria-hidden="true">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,18 15,12 9,6"></polyline>
                            </svg>
                        </div>
                    </a>
                </noscript>
                
                <a href="/analytics" class="action-card action-primary" 
                   role="listitem" 
                   aria-label="View analytics and reports">
                    <div class="action-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18"></path>
                            <path d="M18 17V9"></path>
                            <path d="M13 17V5"></path>
                            <path d="M8 17v-3"></path>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3 class="action-title">View Reports</h3>
                        <p class="action-description">Analyze ticket trends and team performance</p>
                    </div>
                    <div class="action-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </a>
                
                <a href="/support" class="action-card action-secondary" 
                   role="listitem" 
                   aria-label="Get help and support">
                    <div class="action-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3 class="action-title">Help & Support</h3>
                        <p class="action-description">Get assistance and access documentation</p>
                    </div>
                    <div class="action-arrow" aria-hidden="true">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </div>
                </a>
            </div>
        </section>
    </main>
</div>

{# Dashboard functionality is now handled by app-integration.js #}
{# All styles are now in public/assets/css/dashboard-redesign.css #}
{% endblock %}